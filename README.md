# 🎵 音频编辑器

一个简洁易用的网页音频编辑器，支持音频导入、波形可视化和片段导出功能。

## ✨ 核心功能

### 1. 导入音频
- 支持多种音频格式：MP3, WAV, OGG, M4A 等
- 点击"导入音频"按钮选择本地音频文件
- 自动解析并显示音频波形

### 1.5. MP4转WAV 🎬
- **一键转换**：从视频文件（MP4等）中提取音频
- **自动转换**：直接转换为高质量WAV格式
- **即时下载**：转换完成自动下载
- 支持所有浏览器支持的视频格式

### 2. 音频可视化
- 实时绘制音频波形图
- 清晰显示音频振幅变化
- 支持播放进度可视化

### 3. 选择与编辑
- **鼠标拖拽选择片段**：在波形图上按住鼠标左键拖动即可选择音频片段
- **微调选区边界**：选中后边界线显示为红色加粗线条，**整条边界线都可以拖拽**来精确调整选区长度
- **保持选区**：选中的片段会保留，不会因为点击而消失
- **新建选区**：点击选区外的空白处可创建新的选区
- 选中区域以蓝色高亮显示，两侧有红色加粗边界线
- 实时显示选中片段的起始时间、结束时间和时长
- 鼠标悬停在边界线附近时光标会变成调整大小样式（↔）

### 4. 播放控制
- ▶️ 播放/暂停音频
- ⏹️ 停止播放
- **智能播放**：如果有选中片段，点击播放时会只播放选中的片段（从选中开始位置播放到结束位置）
- 如果没有选中片段，则播放整个音频
- 点击波形图任意位置快速定位播放

### 5. 导出功能
- **导出选中片段**：将选中的音频片段保存为 WAV 文件
- **导出完整音频**：将整个音频文件导出为 WAV 格式

## 🚀 快速开始

### 方法一：直接打开
1. 将所有文件下载到同一目录
2. 双击打开 `index.html` 文件
3. 开始使用！

### 方法二：使用本地服务器
```bash
# 进入项目目录
cd audio_editor

# 使用 Python 启动服务器
python -m http.server 8000

# 或使用 Python 3
python3 -m http.server 8000

# 或使用 Node.js (需要先安装 http-server)
npx http-server -p 8000
```

然后在浏览器中访问：`http://localhost:8000`

## 📖 使用说明

### 基本操作流程

1. **导入音频文件**
   - 点击页面顶部的"📁 导入音频"按钮
   - 从本地选择一个音频文件
   - 等待波形图加载完成

2. **选择音频片段**
   - 在波形图上按住鼠标左键不放
   - 拖动鼠标到目标位置
   - 松开鼠标完成选择
   - 选中区域会显示为蓝色背景，两侧有红色加粗边界线
   
   **微调选区：**
   - 将鼠标移到选区的红色边界线上（光标变为 ↔ 样式）
   - 按住鼠标拖拽整条边界线，可以精确调整选区的开始或结束位置
   - **整条线都可以拖拽**，操作范围大，更容易精确调整
   - 选区会保持显示，不会消失
   
   **创建新选区：**
   - 点击选区外的空白区域即可创建新的选区

3. **播放预览**
   - 点击"▶️ 播放"按钮开始播放
   - **如果已选中片段**：只播放选中的部分（从选中开始播放到结束）
   - **如果没有选中片段**：播放整个音频文件
   - 播放过程中会显示红色进度线
   - 点击"⏸️ 暂停"可以暂停播放
   - 点击波形图任意位置可以跳转到该时间点

4. **导出音频**
   - 选中片段后，点击"💾 导出选中片段"保存剪辑
   - 或点击"💿 导出完整音频"保存整个文件
   - 导出的文件为 WAV 格式，音质无损

## 🛠️ 技术栈

- **纯原生开发**：HTML5 + CSS3 + JavaScript
- **Web Audio API**：处理音频数据和播放
- **Canvas API**：绘制音频波形
- **无需任何外部依赖**

## 📋 文件结构

```
audio_editor/
├── index.html      # 主页面
├── style.css       # 样式文件
├── script.js       # 核心功能实现（包含MP4转WAV）
└── README.md       # 说明文档
```

## 🎨 功能特点

### 界面设计
- 🌈 现代化渐变色设计
- 📱 响应式布局，支持移动端
- 🎯 直观的操作界面
- ✨ 流畅的动画效果

### 交互体验
- 🖱️ 鼠标拖拽选择，操作简单
- 👀 实时波形可视化
- ⚡ 快速响应，流畅操作
- 📊 详细的时间信息显示

### 技术优势
- 💻 纯前端实现，无需后端
- 🔒 本地处理，保护隐私
- 🚀 快速加载，即开即用
- 📦 零依赖，文件小巧

## ⚠️ 注意事项

1. **浏览器兼容性**
   - 建议使用现代浏览器（Chrome, Firefox, Edge, Safari 等）
   - 需要浏览器支持 Web Audio API

2. **音频格式**
   - 支持大多数常见音频格式
   - 导出格式固定为 WAV（无损质量）

3. **性能建议**
   - 处理大文件（>100MB）时可能需要较长加载时间
   - 建议使用时长在 10 分钟以内的音频文件

4. **选择技巧**
   - 可以多次选择，后续选择会覆盖之前的
   - 选择区域太小（<0.1秒）会自动取消选择
   - 选择时可以从左到右或从右到左拖动

## 🎯 使用场景

- 🎙️ 播客剪辑
- 🎵 音乐片段提取
- 🔊 音频素材制作
- 📻 语音片段整理
- 🎬 视频配音素材准备

## 🔧 常见问题

**Q: 为什么导入音频后没有显示波形？**
A: 请确保音频格式正确，浏览器支持该格式。可以尝试转换为 MP3 或 WAV 格式。

**Q: 可以导出 MP3 格式吗？**
A: 当前版本仅支持 WAV 格式导出。WAV 是无损格式，可以使用其他工具转换为 MP3。

**Q: 选择的片段太小怎么办？**
A: 可以放大浏览器窗口，或者在波形图上更精确地拖动选择。

**Q: 如何精确调整选区的边界？**
A: 选中片段后，将鼠标移到选区的红色边界线上，光标会变成 ↔ 样式，然后拖拽整条边界线即可精确调整开始或结束位置。整条线都可以点击拖拽，非常方便！

**Q: 选中片段后如何重新选择？**
A: 点击选区外的任意空白处，就可以创建新的选区。

**Q: 支持多轨道编辑吗？**
A: 当前版本仅支持单音频文件的片段选择和导出。

## 📝 更新日志

### v1.4.0 (2025-01-15)
- ✅ 新增：MP4转WAV功能 - 一键从视频文件提取音频并转换为WAV格式
- ✅ 新增：智能导出文件名 - 自动使用原文件名+序号格式
- ✅ 优化：转换过程提示 - 实时显示处理状态
- ✅ 优化：错误处理 - 详细的错误提示信息

### v1.3.0 (2025-01-15)
- ✅ 优化：整条边界线都可拖拽 - 不再使用小圆形手柄，整条红色边界线都可点击拖拽
- ✅ 优化：视觉效果 - 红色加粗边界线更醒目，不会被波形遮挡
- ✅ 优化：操作体验 - 更大的点击区域，更容易精确调整

### v1.2.0 (2025-01-15)
- ✅ 新增：选区微调功能 - 可拖拽选区边界精确调整长度
- ✅ 新增：选区持久化 - 选区不会因点击而消失，保持显示
- ✅ 优化：鼠标交互逻辑 - 智能识别是微调还是新建选区
- ✅ 优化：视觉反馈 - 添加可拖拽边界和光标样式变化

### v1.1.0 (2025-01-15)
- ✅ 新增：智能播放功能 - 有选中片段时自动只播放选中部分
- ✅ 优化：播放体验更加流畅

### v1.0.0 (2025-01-15)
- ✅ 实现音频导入功能
- ✅ 实现波形可视化
- ✅ 实现片段选择功能
- ✅ 实现音频播放控制
- ✅ 实现音频导出功能（WAV格式）
- ✅ 优化界面设计
- ✅ 添加响应式布局

## 📄 开源协议

MIT License

## 💡 反馈与建议

如有问题或建议，欢迎提出！

---

**享受音频编辑的乐趣！** 🎉

